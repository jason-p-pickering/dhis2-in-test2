<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
  <!-- use the DHIS web portal default -->
  <include file="dhis-web-commons.xml"/>

	<package name="dhis-web-excelimport" extends="dhis-web-commons"
		namespace="/dhis-web-excelimport">
		
		<action name="index" class="org.hisp.dhis.excelimport.action.NoAction">
			<result name="success" type="redirect">excelImportForm.action</result>
		</action>
		
		<action name="excelImportForm"
			class="org.hisp.dhis.excelimport.action.ExcelImportFormAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-excelimport/excelImportForm.vm</param>
			<param name="menu">/dhis-web-excelimport/menuWithTree.vm</param>
			<param name="javascripts">
				../dhis-web-commons/ouwt/ouwt.js,../dhis-web-commons/lists/lists.js,javascript/reports.js,javascript/reports.js,javascript/hashtable.js</param>
			<param name="stylesheets">css/StylesForTags.css</param>
			<interceptor-ref name="organisationUnitTreeStack"/>
	        <!--<interceptor-ref name="fileUploadStack"/>-->
		</action>
		
	<!--
		<action name="excelResultForm"
			class="org.hisp.dhis.excelimport.action.ExcelImportResultAction">
			<result name="success" type="velocity">/main.vm</result>
			<result name="notvalid"  type="redirect">reject.action</result>
			<param name="javascripts">
				../dhis-web-commons/ouwt/ouwt.js,../dhis-web-commons/lists/lists.js,javascript/reports.js,javascript/reports.js,javascript/hashtable.js</param>
			<param name="stylesheets">css/StylesForTags.css</param>
	        <interceptor-ref name="fileUploadStack"/>
		</action>
	-->	

		<action name="excelResultForm" class="org.hisp.dhis.excelimport.action.ExcelImportResultAction">
		    <result name="success" type="redirect">excelImportForm.action</result>
		    <result name="notvalid" type="redirect">rejectImport.action</result>
	        <interceptor-ref name="fileUploadStack"/>
		</action>

		<action name="rejectImport"
			class="org.hisp.dhis.excelimport.action.RejectAction">
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-excelimport/invalidReport.vm</param>
			<param name="menu">/dhis-web-excelimport/menuWithTree.vm</param>
			<param name="javascripts">
				../dhis-web-commons/ouwt/ouwt.js,../dhis-web-commons/lists/lists.js,javascript/reports.js,javascript/reports.js,javascript/hashtable.js</param>
			<param name="stylesheets">css/StylesForTags.css</param>
			<interceptor-ref name="organisationUnitTreeStack"/>
	        <interceptor-ref name="fileUploadStack"/>
		</action>
		
		
				<!-- AJAX Requests -->
		<action name="getDataElements"
			class="org.hisp.dhis.excelimport.action.GetDataElementsAction">
			<result name="success" type="velocity">
				/dhis-web-excelimport/responseDataElement.vm</result>
			<interceptor-ref name="transactionStack"/>
			<param name="onExceptionReturn">plainTextError</param>
		</action>
		
		<action name="getPeriods"
			class="org.hisp.dhis.excelimport.action.GetPeriodsAction">
			<result name="success" type="velocity">
				/dhis-web-excelimport/responsePeriod.vm</result>
			<interceptor-ref name="transactionStack"/>
			<param name="onExceptionReturn">plainTextError</param>
		</action>
		
		<action name="getReports"
			class="org.hisp.dhis.excelimport.action.GetReportsAction">
			<result name="success" type="velocity">
				/dhis-web-excelimport/responseImportReport.vm</result>
			<param name="javascripts">
				../dhis-web-commons/ouwt/ouwt.js,javascript/reports.js,../dhis-web-commons/lists/lists.js,javascript/hashtable.js</param>
			<interceptor-ref name="transactionStack"/>
			<param name="onExceptionReturn">plainTextError</param>
		</action>
		
		<action name="getOrgUnitDetails"
			class="org.hisp.dhis.excelimport.action.GetOrgUnitsAction">
			<result name="success" type="velocity">
				/dhis-web-excelimport/responseOrgUnit.vm</result>
			<interceptor-ref name="transactionStack"/>
			<param name="onExceptionReturn">plainTextError</param>
		</action>
		
	</package>
</struts>
