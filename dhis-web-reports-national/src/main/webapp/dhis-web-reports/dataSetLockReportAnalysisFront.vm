
<html>
	    <head>
		        <title>DataSet Lock Reports</title>
        		
		        <script>
		            //Global Variables
		            
					var reportModels = new HashTable();
					var reportFileNames = new HashTable();
					
		            // OrganisationUnit ids and its Names
			            ##var orgUnits = new HashTable();
			            ##foreach($orgUnit in $organisationUnits)
			            ##    var orgUnitId = ""+$orgUnit.getId();
			            ##    orgUnits.put(orgUnitId,"$orgUnit.getShortName()");
			            ##end
			            
			            // OrganisationUnit ids and its Level
			            ##var orgUnitLevels = new HashTable();
			            ##foreach($orgUnit in $organisationUnits)
			            ##    var orgUnitId = ""+$orgUnit.getId();
			            ##    orgUnitLevels.put(orgUnitId,"$organisationUnitService.getLevelOfOrganisationUnit( $orgUnit )");
			            ##end
			            
			            function formValidations()
			            {			            
			                var reportListIndex = document.reportForm.reportList.selectedIndex;
			                var periodIndex = document.reportForm.availablePeriods.selectedIndex;
			                var orgunitIdValue = document.reportForm.ouIDTB.value;
			             //   var periodTypeIndex = document.reportFrom.periodTypeId.selectedIndex;
			               
			                	                
			                //if(document.reportForm.periodTypeId.options[])
			                
			                if(document.reportForm.availablePeriods.options[periodIndex].text == null || document.reportForm.availablePeriods.options[periodIndex].text== "") 
			                {
			                	//document.reportForm.generate.disabled=true;
			                	alert("Please Select Period");
			                	return false;
			                }			            
			                else if(orgunitIdValue == null || orgunitIdValue=="" || orgunitIdValue==" ") {alert("Please Select OrganisationUnit"); return false;}
			                
			                else if(reportListIndex < 0 || document.reportForm.reportList.options[reportListIndex].text == null) {alert("Please Select Report"); return false;}
			                
							document.reportForm.reportModelTB.value = reportModels.get(document.reportForm.reportList.options[reportListIndex].value);
							document.reportForm.reportFileNameTB.value = reportFileNames.get(document.reportForm.reportList.options[reportListIndex].value);
							
							return true;
			            }			
			        </script>
	    </head>
	    
	 <script type="text/javascript">
                var i18n_select_oug_Unit = '$encoder.jsEscape( $i18n.getString( "select_oug_Unit" ) , "'")';
		        var i18n_select_period_id = '$encoder.jsEscape( $i18n.getString( "select_period_id" ) , "'")';
		        var i18n_select_data_set = '$encoder.jsEscape( $i18n.getString( "select_dataset" ) , "'")';
        
                function formValidations1()
                {
                   if( document.reportForm.ouIDTB.value =="")
					 {
		              alert(i18n_select_oug_Unit)
		              return false;
		           }
		          
		     
		      var  periodIdOptions = document.getElementById("periodIds").options;
                    
                    if(periodIdOptions.length>0)
                    {
                        var i;
                        for( i=0; i < periodIdOptions.length ; i++)
                        {
                            if(periodIdOptions[i].selected==true)
                                break;
                        }
                        if(i==periodIdOptions.length)
                        {
                            alert(i18n_select_period_id);
                            return false;
                        }
                    }
                    else
                    {
                        alert(i18n_select_period_id);
                        return false;
                    }
						
					 if(!document.getElementById("dataSets").options.length>0)
                     {
                        alert(i18n_select_data_set);
                        return false;  
                     }
						
                    return true;
                }               
            </script>

	
	
	<body>
	        <h1>DataSet Lock Reports Analyser</h1>
	        <hr />	
	        <br />
	        <form id="reportForm" name="reportForm" action="generateDataSetLockReportResult.action" method="post" onsubmit="return formValidations1()" target="_blank">        
            <table style=" border-collapse: collapse; margin-top: 0;" cellpadding="0" cellspacing="0" border=0>		                
		      
				<tr>
					<th>$i18n.getString( "period_type" )</th>
					<td style="min-width: 325px">&nbsp;</td>
					<td class="NormalB"> OrganisationUnit :</td>                          
                          
				</tr>
				<tr>
					<td valign="top">
						<select id="periodTypeId" name="periodTypeId" style="min-width:325px" onchange="getAllPeriods()">
							<option value="null">[ $i18n.getString( "select_period_type_all" ) ]</option>
								#foreach ( $type in $periodTypes )
							<option value="$type.name"#if( $currentPeriodTypeId == $type.name ) selected="selected"#end>$type.name</option>
							#end
						</select>
					</td>
				   <td style="min-width: 125px">&nbsp;</td>
					 <td class="NormalB">                            
                     <input type="text" name="ouNameTB" id="ouNameTB" size="20" disabled>         
                      </td> 
				</tr>
					<tr>
                    <td>&nbsp;</td>
					<td style="min-width: 125px">&nbsp;</td>
                    <td>&nbsp;</td>
                    
                </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td style="min-width: 125px">&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>   
				<tr>
					<th>$i18n.getString( "available_periods" )</th>
					<td style="min-width: 125px">&nbsp;</td>
					<th>$i18n.getString( "datasets" )</th>
					
				</tr>
				<tr>
		 			<td valign="top">
						<select id="periodIds" name="periodIds" style="min-width:325px; max-height: 100px;" disabled="true" multiple="multiple">
							<!--<option value="null">[ $i18n.getString( "select_period_all" ) ]</option>  -->              
						</select>
					</td>
					<td style="min-width: 125px">&nbsp;</td>
					<!-- DataSets -->
					<td valign="top">
				    	<select id="dataSets" name="dataSets"  style="min-width:325px">
						</select>
					</td>
		    </tr>  
                <tr>        
					<td>&nbsp;</td>
					<td style="min-width: 125px">&nbsp;</td>
                    <td>&nbsp;</td>
				</tr> 
                <tr>
                    <td>&nbsp;</td>
                    <td style="min-width: 125px">&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                	
			
                <tr>
                    <td>&nbsp;</td>
                    <td style="min-width: 125px">&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                   <td style="min-width: 125px">&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
	               
						  <br><br>	  							
          	              <tr>
								<td>	
								<input type="submit" id= "generate" name="generate" value="Generate Report"  disabled>
								</td>
								<td style="min-width: 125px">&nbsp;</td>
								<td>&nbsp;</td>
						 </tr>
						  <input type="hidden" name="autogen" id="autogen" value="0" >
          	              <input type="hidden" name="ouIDTB" id="ouIDTB">
          	            
                    	</td>
                </tr>
            	</table>
        </form>
	    </body>
	</html>        